{% extends "base.html" %}

{% block title %}{{ page.title }} - Autism Bharat{% endblock %}

{% block meta_description %}{% if page.description %}{{ page.description }}{% else %}Autism Bharat resource page{% endif %}{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section-page">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <!-- Breadcrumb -->
                <nav aria-label="breadcrumb" class="mb-3">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/" class="text-white-50">Home</a></li>
                        {% if resource.name %}
                            <li class="breadcrumb-item"><a href="/{{ resource.name }}/" class="text-white-50">{{ resource.title }}</a></li>
                        {% endif %}
                        <li class="breadcrumb-item active text-white" aria-current="page">{{ page.title }}</li>
                    </ol>
                </nav>

                <h1 class="display-4 fw-bold mb-3">
                    <a href="/{{ resource.name }}/" class="text-white text-decoration-none">{{ resource.title }}</a>
                </h1>
                {% if resource.description and page.name == "index" %}
                <p class="lead mb-4">{{ resource.description }}</p>
                {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<article class="container">
    <div class="row">
        <!-- Main Content -->
        <div class="col-lg-9">
            <div class="page-content bg-white rounded-3 p-4">

                {% if page.name == "index" and resource.image_url %}
                <div class="sidebar-image mb-3">
                    <img src="{{ resource.image_url }}" alt="{{ resource.title }}" class="img-fluid rounded">
                </div>
                {% endif %}


                {% if page.name != "index" %}
                    <h1>{{page.title}}</h1>
                {% endif %}

                {{ to_markdown(page.body)|safe }}
            </div>

            <!-- Navigation -->
            <div class="mt-5 pt-4 border-top">
                <nav class="nav-stacked-v4">
                    {% set next_page = resource.get_next_page(page) %}
                    {% if next_page %}
                        <a href="{{ next_page.url }}" class="primary">
                            <div>
                                <div style="font-size: 12px; margin-bottom: 2px;">Continue reading</div>
                                <div style="font-weight: 500;">Next: {{ next_page.title }}</div>
                            </div>
                            <span class="chevron-right">›</span>
                        </a>
                    {% endif %}
                    {% set prev_page = resource.get_previous_page(page) %}
                    {% if prev_page %}
                        <a href="{{ prev_page.url }}" class="secondary">
                            <span class="chevron-left">‹</span>
                            <div>
                                <div style="font-size: 14px;">Previous: {{ prev_page.title }}</div>
                            </div>
                        </a>
                    {% endif %}
                </nav>
            </div>
        </div>

        <!-- Sidebar: Hidden on small screens, visible on lg+ -->
        <aside class="col-lg-3 d-none d-lg-block">
            <div class="resource-sidebar sticky-top" style="top: 1rem;">
                <h3 class="sidebar-title">Contents</h3>
                <nav class="sidebar-nav" aria-label="Resource pages">
                    <ul class="sidebar-nav-list">
                        {% for resource_page in resource.pages %}
                            <li class="sidebar-nav-item">
                                <a href="{{ resource_page.url }}"
                                   class="sidebar-nav-link {% if resource_page.name == page.name %}active{% endif %}">
                                    {{ resource_page.title }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </nav>
            </div>
        </aside>
    </div>
</article>
{% endblock %}
